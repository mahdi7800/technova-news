<?phpfunction wp_tnw_token_create_to_db($email, $recaver_email) {	global $wpdb;	$token = explode('=', $recaver_email);	if (!isset($token[1])) {		return false;	}	$table = $wpdb->prefix . 'tnw_validate_token';	$stmt = $wpdb->get_row($wpdb->prepare("SELECT email FROM {$table} WHERE email=%s", $email));	if ($stmt) {		$data = ['token' => $token[1]];		$where = ['email' => $email];		$wpdb->update($table, $data, $where, ['%s'], ['%s']);	} else {		$data = [			'email' => $email,			'token' => $token[1]		];		$wpdb->insert($table, $data, ['%s', '%s']);	}	return true;}function wp_tnw_find_recaver_token($token) {	global $wpdb;	$table = $wpdb->prefix . 'tnw_validate_token';	return $wpdb->get_row($wpdb->prepare("SELECT * FROM {$table} WHERE token = %s", $token));}function wp_tnw_check_token_get_usr_id( $token ) {	global $wpdb;	$table = $wpdb->prefix . 'tnw_validate_token';	// دریافت اطلاعات توکن	$stmt = $wpdb->get_row( $wpdb->prepare( "SELECT * FROM {$table} WHERE token = %s", $token ) );	if ( ! $stmt || empty( $stmt->email ) ) {		return false;	}	// دریافت کاربر از ایمیل	$user = get_user_by( 'email', $stmt->email );	return $user ? $user->ID : false;}function wp_tnw_delete_recover_password( $token ) {	global $wpdb;	$table = $wpdb->prefix . 'tnw_validate_token';	$wpdb->delete(		$table,		[ 'token' => $token ],		[ '%s' ]	);}