<?phpadd_action( 'wp_ajax_nopriv_tnw_register_form_deactivate_sms', 'tnw_register_form_deactivate_sms' ); function tnw_register_form_deactivate_sms() {	 if ( ! isset( $_POST['nonce'] ) && ! wp_verify_nonce( $_POST['nonce'] ) ) {		 die( 'access deind' );	 }	 $full_name = sanitize_text_field( $_POST['full_name'] );	 $email     = sanitize_text_field( $_POST['email'] );	 $password  = sanitize_text_field( $_POST['password'] );	 $phone_number = $_POST['phone_number'];	 $display_name_parts = explode( ' ', $full_name );	 $first_name   = $display_name_parts[0] ?? '';	 $last_name    = $display_name_parts[1] ?? '';	 $display_name = trim( $first_name . ' ' . $last_name );	 tnw_register_form_validate( $full_name, $email, $password );	 $userdata       = [		 'user_login'   => apply_filters('pre_user_login', explode( '@', $email )[0] . rand( 1, 99 )),		 'display_name' => apply_filters('pre_user_display_name', $display_name),		 'first_name'   => apply_filters('pre_user_first_name', $first_name ),		 'last_name'    => apply_filters('pre_user_last_name', $last_name),		 'user_email'   => apply_filters('pre_user_email', $email),		 'user_pass'    => apply_filters('pre_user_pass', $password),	 ];	 $insert_user_id = wp_insert_user( $userdata );	 if ( ! is_wp_error( $insert_user_id ) ) {		 add_user_meta($insert_user_id,'_tnw_user_phone_number',$phone_number);		 wp_send_json( [			 'success'      => true,			 'message'      => 'ثبت نام شما با موفقیت انجام شد',			 'redirect_url' => site_url()], 200		 );	 } else {		 wp_send_json(['error' => true, 'message' => 'خطایی در ثبت نام لطفا دوباره تلاش کنید!'], 403);	 } }