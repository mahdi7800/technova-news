<?phpadd_action('wp_ajax_nopriv_tnw_send_phone_number','tnw_send_phone_number');function tnw_send_phone_number() {	if (!isset($_POST['nonce']) && !wp_verify_nonce($_POST['nonce'])){		die('access deind');	}	$phone_number = sanitize_text_field($_POST['phone_number']);	is_phone_number_exist($phone_number);	ValidateParameter($phone_number);	$verification_code= VerificationCode::tnw_verification_code();	wp_tnw_verification_code_to_db($verification_code,$phone_number);	 get_option( '_tnw_sms_website' );	$bodyId = get_option( '_tnw_sms_website')['sms_data']['verify_code'];	$send_sms = tnw_send_sms($verification_code,$phone_number,$bodyId);	if (!$send_sms->StrRetStatus != 'OK'){		wp_send_json(['success'=>true,'message'=>'کد امنیتی ارسال شد'],200);	}else{		wp_send_json(['error'=>true,'message'=>'ارسال پیامک با خطا مواجه شد!'],500);	}}// Validatefunction ValidateParameter($phone_number) {	if (empty($phone_number)){		wp_send_json(['error'=>true , 'message'=>'لطفا شماره موبایل خود را وارد کنید!'],403);	}	if (!preg_match('/^(0|09|\+)[0-9]{8,10}$/',$phone_number)){		wp_send_json(['error'=>true , 'message'=>'لطفا شماره موبایل معتبر خود را وارد کنید!'],403);	}}//is_phone_existfunction is_phone_number_exist($phone_number) {	$args = [		'meta_key' => '_tnw_user_phone_number',		'meta_value' => $phone_number,		'compare' => '='	];	$user_phone = new WP_User_Query($args);	if ($user_phone->get_total()) {		wp_send_json(['error' => true, 'message' => 'قبلا با این شماره موبایل ثبت نام صورت گرفته است!'], 403);	}}