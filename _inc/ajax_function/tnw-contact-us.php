<?phpadd_action( 'wp_ajax_nopriv_tnw_contact_us', 'tnw_contact_us' );add_action( 'wp_ajax_tnw_contact_us', 'tnw_contact_us' );function tnw_contact_us() {	if ( ! isset( $_POST['nonce'] ) && ! wp_verify_nonce( $_POST['nonce'] )) {		die('access dined');	}	$validation = tnw_contact_us_validate( $_POST );	if ( $validation !== true ) {		wp_send_json( $validation, 403 );		wp_die();	}	$email     = sanitize_email( $_POST['email'] );	$full_name = sanitize_text_field( $_POST['full_name'] );	$subject   = sanitize_text_field( $_POST['subject'] );	$message   = sanitize_textarea_field( $_POST['message'] );	$headers = [ 'Content-Type: text/html; charset=UTF-8' ];	$send_mail = wp_mail(		'info@technoavar.com',		'پیام های ارسالی شما :',		Tnw_MailLayout::tnw_contact_layout( $full_name, $email, $subject, $message ),		$headers	);	if ( $send_mail ) {		wp_send_json( [ 'success' => true, 'message' => 'پیام شما ارسال شد!' ], 200 );	} else {		wp_send_json( [ 'error' => true, 'message' => 'خطا در ارسال ایمیل. لطفا مجدد تلاش کنید' ], 403 );	}	wp_die();}// VALIDATEfunction tnw_contact_us_validate( $data ) {	if (empty($data)){		return [ 'error' => true, 'message' => 'پر کردن تمامی فیلد ها الزامی است!' ];	}	if ( empty( $data['email'] ) ) {		return [ 'error' => true, 'message' => 'ایمیل را وارد کنید!' ];	}	if ( empty( $data['full_name'] ) ) {		return [ 'error' => true, 'message' => 'نام و نام خانوادگی خود را وارد کنید!' ];	}	if ( empty( $data['subject'] ) ) {		return [ 'error' => true, 'message' => 'موضوع پیام را وارد کنید!' ];	}	if ( empty( $data['message'] ) ) {		return [ 'error' => true, 'message' => 'پیام خود را بنویسید' ];	}	if ( ! is_email( $data['email'] ) ) {		return [ 'error' => true, 'message' => 'لطفا یک آدرس ایمیل معتبر وارد کنید' ];	}	if ( strlen( $data['message'] ) < 10 ) {		return [ 'error' => true, 'message' => 'پیام شما باید حداقل ۱۰ کاراکتر داشته باشد' ];	}	return true;}